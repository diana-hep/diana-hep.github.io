<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Spark-ROOT - DIANA HEP</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <link href="http://diana-hep.org/images/favicon.ico" rel="icon">

<link rel="canonical" href="http://diana-hep.org/pages/project_spark_root.html.html">

        <meta name="author" content="Jim Pivarski" />
        <meta name="description" content="Access ROOT data in Apache Spark." />

    <meta property="og:site_name" content="DIANA HEP" />
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Spark-ROOT"/>
    <meta property="og:url" content="http://diana-hep.org/pages/project_spark_root.html.html"/>
    <meta property="og:description" content="Access ROOT data in Apache Spark." />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="http://diana-hep.org/theme/css/bootstrap.cosmo.min.css" type="text/css"/>
    <link href="http://diana-hep.org/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="http://diana-hep.org/theme/css/pygments/default.css" rel="stylesheet">
    <link rel="stylesheet" href="http://diana-hep.org/theme/css/style.css" type="text/css"/>






    <link rel="stylesheet" href="http://diana-hep.org/theme/css/dianahep-styles.css" type="text/css"/>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-127263619-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-127263619-1');
</script>

    <!---->
        <!--<link href="http://diana-hep.org/static/custom.css" rel="stylesheet">-->
    <!---->
</head>
<body>

<nav class="navbar navbar-default navbar-fixed-top navbar-blue">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/"><img src="http://diana-hep.org/theme/img/dianahep-logo.svg" width="180px"> </a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                    <li><a href="/pages/team.html">Team</a></li>
                    <li><a href="/pages/activities.html">Activities/Products</a></li>
                    <li><a href="/pages/fellows.html">DIANA Fellows</a></li>
                    <li><a href="/category/blog.html">Blog</a></li>
            </ul>



        </div>
    </div>
</nav>

    <section id="content" class="body">
        <h1 class="entry-title">Spark-ROOT</h1>
        
        <div class="entry-content">
            <p>Spark-ROOT is a pure-Java (and Scala) implementation of ROOT file reading, which presents a collection of ROOT files as a DataFrame object in Spark. This allows high-energy physicists to use Spark without giving up on or reformatting all their data.</p>
<h3>Motivation</h3>
<p>Spark is a useful platform for data analysis. It provides easy access to parallelization and is a focus point for data science tools from industry, particularly machine learning.</p>
<p>However, none of this would be useful to high-energy physicists if they cannot get their data into the platform. Spark-ROOT does this transparently.</p>
<h3>Technique</h3>
<p>Spark-ROOT is not a JNI adaptation of ROOT or even a socket or pipe-based bridge. It is a reimplementation of ROOT file reading based on Tony Johnson's FreeHEP project. As a pure-Java project, it is trivial to install (see below) and doesn't suffer from segmentation faults in the JNI or the flimsiness of piping data to an external process.</p>
<p>ROOT's ability to selectively read columns is matched to Spark's "pruned scan" to automatically optimize reads.</p>
<p>ROOT files may be accessed locally or from HDFS.</p>
<h3>How to use</h3>
<p>When you launch Spark, pass Spark-ROOT's Maven coordinates to load the package on startup.</p>
<div class="highlight"><pre><span></span>spark-shell --packages org.diana-hep:spark-root_2.11:0.1.7
</pre></div>


<p>Now you can</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.dianahep.sparkroot._</span>
<span class="n">val</span> <span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">sqlContext</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">root</span><span class="p">(</span><span class="s2">&quot;path/to/file.root&quot;</span><span class="p">)</span>
</pre></div>


<p>and use <code>df</code> as you would any other Spark DataFrame.</p>
<h3>For more information</h3>
<p>See the GitHub site: <a href="http://github.com/diana-hep/spark-root">http://github.com/diana-hep/spark-root</a>.</p>
        </div>
    </section>


<div class="jumbotron jumbo-navy links">
   <div class="container">

      <div class="row">
         <div class="col-md-2">
            <img src="http://diana-hep.org/theme/img/abstract-footer-logo.svg" width="140px">
         </div>
         <div class="col-md-6">
            <h4>Links</h4>

                  <ul class="list-unstyled" style="display:inline-block">


                     <li><a href="https://root.cern.ch/drupal/" target="_blank">ROOT </a></li>





                     <li><a href="http://www.nsf.gov/funding/pgm_summ.jsp?pims_id=504817" target="_blank">NSF SI2 </a></li>





                     <li><a href="http://s2i2-hep.org/" target="_blank">S2I2-HEP </a></li>





                     <li><a href="http://jetscape.wayne.edu/" target="_blank">Jetscape </a></li>




                  </ul>
                  <ul class="list-unstyled" style="display:inline-block; margin-left: 20%">

                     <li><a href="http://www.rootpy.org" target="_blank">rootpy </a></li>





                     <li><a href="http://scikit-learn.org/stable/" target="_blank">scikit-learn </a></li>





                     <li><a href="https://twiki.cern.ch/twiki/bin/view/RooStats/WebHome" target="_blank">RooStats </a></li>





                     <li><a href="http://diana-hep.org/pages/conferences.html" target="_blank">Conferences </a></li>

                  </ul>



            <!--
            <ul class="list-unstyled" style="display:inline-block">
               <li><a href="" target="_blank">ROOT</a></li>
               <li><a href="" target="_blank">RIO</a></li>
               <li><a href="" target="_blank">NSF SI2</a></li>
               <li><a href="" target="_blank">RooStats</a></li>
            </ul>

            <ul class="list-unstyled" style="display:inline-block; margin-left: 20%">
               <li><a href="" target="_blank">GooFit</a></li>
               <li><a href="" target="_blank">RootPy</a></li>
               <li><a href="" target="_blank">AstroPy</a></li>
               <li><a href="" target="_blank">scikit-learn</a></li>
            </ul>
         -->

         </div>
         <div class="col-md-4">
            <h4>Contact</h4>
            <ul class="list-unstyled">
               <li><a href="http://twitter.com/diana_hep" target="_blank">twitter</a></li>
               <li><a href="http://github.com/diana-hep" target="_blank">github</a></li>
               <li><a href="https://www.youtube.com/channel/UCzFnto-EbPAfERLr0AZb58g" target="_blank">YouTube</a></li>
               <li><a href="https://indico.cern.ch/category/7192/" target="_blank">Indico</a></li>
               <li><a href="https://groups.google.com/forum/#!forum/diana-hep" target="_blank">Google Group</a></li>
               <li><a href="https://vidyoportal.cern.ch/flex.html?roomdirect.html&key=g24IFWEdhejzHVy851PztEh82e4" target="_blank">Vidyo Room</a></li>

            </ul>
         </div>
      </div>
   </div>

</div>

<script src="http://diana-hep.org/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://diana-hep.org/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://diana-hep.org/theme/js/respond.min.js"></script>

    <script src="http://diana-hep.org/theme/js/bodypadding.js"></script>
    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'diana-hep'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->

</body>
</html>